"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __exportStar = (this && this.__exportStar) || function(m, exports) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.Svix = exports.messageInRaw = void 0;
const openapi_1 = require("./openapi");
const authentication_1 = require("./api/authentication");
const application_1 = require("./api/application");
const background_task_1 = require("./api/background_task");
const endpoint_1 = require("./api/endpoint");
const event_type_1 = require("./api/event_type");
const integration_1 = require("./api/integration");
const message_1 = require("./api/message");
const message_attempt_1 = require("./api/message_attempt");
const op_webhook_endpoint_1 = require("./api/op_webhook_endpoint");
const statistics_1 = require("./api/statistics");
__exportStar(require("./openapi/models/all"), exports);
__exportStar(require("./openapi/apis/exception"), exports);
__exportStar(require("./webhook"), exports);
var message_2 = require("./api/message");
Object.defineProperty(exports, "messageInRaw", { enumerable: true, get: function () { return message_2.messageInRaw; } });
const VERSION = "1.45.1";
class UserAgentMiddleware {
    pre(context) {
        context.setHeaderParam("User-Agent", `svix-libs/${VERSION}/javascript`);
        return Promise.resolve(context);
    }
    post(context) {
        return Promise.resolve(context);
    }
}
const REGIONS = [
    { region: "us", url: "https://api.us.svix.com" },
    { region: "eu", url: "https://api.eu.svix.com" },
    { region: "in", url: "https://api.in.svix.com" },
];
class Svix {
    constructor(token, options = {}) {
        var _a, _b, _c;
        const regionalUrl = (_a = REGIONS.find((x) => x.region === token.split(".")[1])) === null || _a === void 0 ? void 0 : _a.url;
        const baseUrl = (_c = (_b = options.serverUrl) !== null && _b !== void 0 ? _b : regionalUrl) !== null && _c !== void 0 ? _c : "https://api.svix.com";
        const baseServer = new openapi_1.ServerConfiguration(baseUrl, {});
        const bearerConfiguration = {
            tokenProvider: {
                getToken: () => token,
            },
        };
        const config = (0, openapi_1.createConfiguration)({
            baseServer,
            promiseMiddleware: [new UserAgentMiddleware()],
            authMethods: {
                HTTPBearer: bearerConfiguration,
            },
        });
        this._configuration = config;
        this.authentication = new authentication_1.Authentication(config);
        this.application = new application_1.Application(config);
        this.endpoint = new endpoint_1.Endpoint(config);
        this.eventType = new event_type_1.EventType(config);
        this.integration = new integration_1.Integration(config);
        this.message = new message_1.Message(config);
        this.messageAttempt = new message_attempt_1.MessageAttempt(config);
        this.backgroundTask = new background_task_1.BackgroundTask(config);
        this.statistics = new statistics_1.Statistics(config);
        this.operationalWebhookEndpoint = new op_webhook_endpoint_1.OperationalWebhookEndpoint(config);
    }
}
exports.Svix = Svix;
//# sourceMappingURL=index.js.map